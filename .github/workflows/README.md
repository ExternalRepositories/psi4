# GHA for Psi4

## [docs.yml](./docs.yml)

* Runs on: push to master
* Goals
  * get CI warning if doxygen docs compile broken
  * get CI warning if sphinx docs compile broken üçè, or compile with warnings üçè, or compile with unreachable links ‚ùå, or can't compile nit-picky ‚ùå
  * publish nightly-build docs promptly and automatically
  * get CI warning if psi4 compile broken with conda-forge environment (as opposed to the usual defaults-based environment)
* Results
  * automated commit of built HTML docs to psi4/psi4docs:master, which in turn is served up by netlify to https://psi4manual.netlify.app/, which in turn is [redirected by psicode](https://github.com/psi4/psicode-hugo-website/blob/master/netlify.toml) into https://psicode.org/psi4manual/master/index.html

----

## [docs-pr.yml](./docs-pr.yml)

* Runs on: push to PR (actually, [`pull_request_target`](https://securitylab.github.com/research/github-actions-preventing-pwn-requests/), so to edit workflow, change docs-pr.yml on LHS of "psi4/psi4:<branch> <- <user>/psi4:<prbranch>")
* Goals
  * provide CI warning to author if PR changes break sphinx docs compile
  * provide preview of built docs HTML to author
  * maintain psi4 repo up-to-date with generated files
* Results
  * automated commit to the PR of `samples/` and `psifiles.py` changes to the psi4 repo generated by docs build. This commit gets reviewed with the PR and `git add` paths limited, so not a security risk.
  * automated PR of built sphinx docs to the docs repo, psi4/psi4docs:p4-<psiprnumber>, which generates a docs HTML preview. this PR is submitted as draft and never merged, so not a security risk.
  * archived tarball of HTML docs (download from Actions, Archives, then unpack and view in browser)
